<ng-template #noDragTemplate>
    <ng-template *ngTemplateOutlet="headerTemplate"></ng-template>
</ng-template>

<!-- Will switch templates depending on dragDrop -->
<ng-template *ngTemplateOutlet="noDragTemplate">
</ng-template>

<div #childrenContainer *ngIf="expanded" class="igx-tree-node__group" role="group">
    <ng-content select="igx-tree-node"></ng-content>
</div>

<ng-template #defaultIndicator let-item>
    <igx-icon>
        {{ expanded ? "keyboard_arrow_down" : "keyboard_arrow_right" }}
    </igx-icon>
</ng-template>

<ng-template #defaultSelect let-item>
    <igx-checkbox [checked]="selected" [readonly]="true" [indeterminate]="indeterminate" tabindex="-1">
    </igx-checkbox>
</ng-template>

<ng-template #headerTemplate>
    <div #ghostTemplate class="igx-tree-node__content" >
        <div [ngClass]="{ hidden: !children?.length }"
            class="igx-tree-node__indicator igx-tree-node__expand"
            (click)="expandNode()"
        >
            <ng-container *ngTemplateOutlet="expandIndicatorTemplate, context: templateContext">
            </ng-container>
        </div>
        <div class="igx-tree-node__header">
            <div *ngIf="showSelectors"
                class="igx-tree-node__indicator igx-tree-node__select"
                (pointerdown)="$event.preventDefault()"
                (click)="onSelectorClick($event)"
            >
                <ng-container *ngTemplateOutlet="selectMarkerTemplate, context: templateContext">
                </ng-container>
            </div>
            <div #test [ngClass]="{'igx-tree-node--focused' : this.focused, 'igx-tree-node--active' : this.active}" (pointerdown)="onPointerDown($event)">
                <ng-content></ng-content>
            </div>
        </div>
    </div>
    <!-- Buffer element for 'move after' when D&D is implemented -->
    <div class="igx-tree-node__header-buffer"></div>
</ng-template>

<ng-template #dragTemplate>
    <!-- Drag drop goes here
        igxDrop
        #dropRef="drop"
        [igxNodeDrag]="this"
        (dragStart)="logDrop(dropRef)"
        (leave)="emitLeave()"
        (enter)="emitEnter()" -->
    <div class="igx-tree-node__drag-wrapper">
        <ng-template *ngTemplateOutlet="headerTemplate"></ng-template>
    </div>
</ng-template>
