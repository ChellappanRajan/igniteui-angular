<ng-template #noDragTemplate>
    <ng-template *ngTemplateOutlet="headerTemplate"></ng-template>
</ng-template>

<!-- Will switch templates depending on dragDrop -->
<ng-template *ngTemplateOutlet="noDragTemplate">
</ng-template>

<div #childrenContainer *ngIf="expanded" class="igx-tree-node__group" role="group">
    <ng-content select="igx-tree-node"></ng-content>
</div>

<ng-template #defaultIndicator let-item>
    <igx-icon [attr.aria-label]="expanded ? resourceStrings.igx_collapse : resourceStrings.igx_expand">
        {{ expanded ? "keyboard_arrow_down" : "keyboard_arrow_right" }}
    </igx-icon>
</ng-template>

<ng-template #defaultSelect let-item>
    <igx-checkbox [checked]="selected" [readonly]="true" [indeterminate]="indeterminate" [tabindex]="-1">
    </igx-checkbox>
</ng-template>

<ng-template #headerTemplate>
    <div #ghostTemplate class="igx-tree-node__wrapper" [ngClass]="{
            'igx-tree-node__wrapper--selected': selected,
            'igx-tree-node__wrapper--focused' : this.focused,
            'igx-tree-node__wrapper--active' : this.active}">
        <div aria-hidden="true">
            <span aria-hidden="true" class="igx-tree-node__spacer" *ngFor="let item of [].constructor(level)"></span>
        </div>

        <!-- Expand/Collapse indicator -->
        <span [ngClass]="{ 'igx-tree-node__indicator--hidden': !children?.length }" class="igx-tree-node__indicator"
            (click)="expandNode()">
            <ng-container *ngTemplateOutlet="expandIndicatorTemplate, context: { $implicit: selected }">
            </ng-container>
        </span>

        <!-- Item selection -->
        <div class="igx-tree-node__select" *ngIf="showSelectors" (pointerdown)="$event.preventDefault()"
            (click)="onSelectorClick($event)">
            <ng-container *ngTemplateOutlet="selectMarkerTemplate, context: { $implicit: expanded }">
            </ng-container>
        </div>

        <div class="igx-tree-node__content" [ngClass]="{}" (pointerdown)="onPointerDown($event)">
            <!-- <div class="igx-tree-node__content" (pointerdown)="onPointerDown($event)"> -->
            <!-- Ghost content -->
            <ng-content></ng-content>
        </div>

        <!--  Buffer element for 'move after' when D&D is implemented-->
        <div class="igx-tree-node__drop-indicator">
            <span aria-hidden="true" class="igx-tree-node__spacer" *ngFor="let item of [].constructor(level)"></span>
            <div></div>
        </div>
    </div>
</ng-template>

<ng-template #dragTemplate>
    <!-- Drag drop goes here
        igxDrop
        #dropRef="drop"
        [igxNodeDrag]="this"
        (dragStart)="logDrop(dropRef)"
        (leave)="emitLeave()"
        (enter)="emitEnter()" -->
    <div class="igx-tree-node__drag-wrapper">
        <ng-template *ngTemplateOutlet="headerTemplate"></ng-template>
    </div>
</ng-template>
