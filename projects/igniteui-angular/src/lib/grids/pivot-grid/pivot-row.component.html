<!-- Row Dimension -->
<div #rowDimensionContainer>
    <igx-pivot-row-dimension-content class="igx-grid-thead" [grid]="grid" [hasMRL]="grid.hasColumnLayouts"
        [density]="grid.displayDensity" [activeDescendant]="grid.activeDescendant" [width]="grid.pivotRowWidths"
        [unpinnedColumnCollection]="rowDimension" (scroll)="grid.preventHeaderScroll($event)" [intRow]="this">
    </igx-pivot-row-dimension-content>
</div>


<ng-container *ngIf="pinnedColumns.length > 0 && grid.isPinningToStart">
    <ng-template *ngTemplateOutlet="pinnedCellsTemplate; context: this"></ng-template>
</ng-container>

<ng-template igxGridFor let-col [igxGridForOf]="unpinnedColumns | igxNotGrouped"
    [igxForScrollContainer]="grid.parentVirtDir" let-colIndex="index" [igxForSizePropName]='"calcPixelWidth"'
    [igxForScrollOrientation]="'horizontal'" [igxForContainerSize]='grid.unpinnedWidth'
    [igxForTrackBy]='grid.trackColumnChanges' #igxDirRef>
    <igx-grid-cell #cell class="igx-grid__td igx-grid__td--fw"
        [class.igx-grid__td--edited]="key | transactionState:col.field:grid.rowEditable:grid.transactions:grid.pipeTrigger:grid.gridAPI.crudService.cell:grid.gridAPI.crudService.row"
        [attr.aria-describedby]="gridID + '_' + col.field | igxStringReplace:'.':'_'"
        [class.igx-grid__td--number]="col.dataType === 'number' || col.dataType === 'percent' || col.dataType === 'currency'"
        [class.igx-grid__td--bool]="col.dataType === 'boolean'"
        [ngClass]="this.getCellClass(col) | igxCellStyleClasses:data[col.field]:data:col.field:viewIndex:grid.pipeTrigger"
        [ngStyle]="col.cellStyles | igxCellStyles:data[col.field]:data:col.field:viewIndex:grid.pipeTrigger"
        [editMode]="col.editable && this.grid.crudService.targetInEdit(index, col.index)" [column]="col"
        [formatter]="col.formatter" [intRow]="this" [active]="isCellActive(col.visibleIndex)"
        [style.min-height.px]="cellHeight" [data]="data" [style.min-width]="col.width" [style.max-width]="col.width"
        [style.flex-basis]="col.width" [width]="col.getCellWidth()" [visibleColumnIndex]="col.visibleIndex"
        [value]="data | dataMapper:col.field:grid.pipeTrigger:data[col.field]:col.hasNestedPath"
        [cellTemplate]="col.bodyTemplate" [lastSearchInfo]="grid.lastSearchInfo"
        [cellSelectionMode]="grid.cellSelection" [displayPinnedChip]="shouldDisplayPinnedChip(col.visibleIndex)"
        (pointerdown)="grid.navigation.focusOutRowHeader($event)">
    </igx-grid-cell>
</ng-template>

<ng-container *ngIf="pinnedColumns.length > 0 && !grid.isPinningToStart">
    <ng-template *ngTemplateOutlet="pinnedCellsTemplate; context: this"></ng-template>
</ng-container>

<ng-template #rowSelectorBaseTemplate>
    <div class="igx-grid__cbx-padding">
        <igx-checkbox [tabindex]="-1" [readonly]="true" [checked]="selected" [disableRipple]="true" [disabled]="deleted"
            [disableTransitions]="grid.disableTransitions" [aria-label]="rowCheckboxAriaLabel">
        </igx-checkbox>
    </div>
</ng-template>

<ng-template #pinnedCellsTemplate let-col>
    <igx-grid-cell *ngFor="let col of pinnedColumns | igxNotGrouped"
        class="igx-grid__td igx-grid__td--fw igx-grid__td--pinned"
        [class.igx-grid__td--edited]="key | transactionState:col.field:grid.rowEditable:grid.transactions:grid.pipeTrigger:grid.gridAPI.crudService.cell:grid.gridAPI.crudService.row"
        [attr.aria-describedby]="gridID + '_' + col.field | igxStringReplace:'.':'_'"
        [class.igx-grid__td--number]="col.dataType === 'number' || col.dataType === 'percent' || col.dataType === 'currency'"
        [ngClass]="col.cellClasses | igxCellStyleClasses:data[col.field]:data:col.field:viewIndex:grid.pipeTrigger"
        [ngStyle]="col.cellStyles | igxCellStyles:data[col.field]:data:col.field:viewIndex:grid.pipeTrigger"
        [editMode]="col.editable && this.grid.crudService.targetInEdit(index, col.index)" [column]="col"
        [formatter]="col.formatter" [intRow]="this" [active]="isCellActive(col.visibleIndex)"
        [firstPinned]="col.isFirstPinned" [lastPinned]="col.isLastPinned" [style.min-height.px]="cellHeight"
        [data]="data" [style.min-width]="col.width" [style.max-width]="col.width" [style.flex-basis]="col.width"
        [style.left]="col.rightPinnedOffset" [width]="col.getCellWidth()" [visibleColumnIndex]="col.visibleIndex"
        [value]="data | dataMapper:col.field:grid.pipeTrigger:data[col.field]:col.hasNestedPath"
        [cellTemplate]="col.bodyTemplate" [lastSearchInfo]="grid.lastSearchInfo"
        [cellSelectionMode]="grid.cellSelection" [displayPinnedChip]="shouldDisplayPinnedChip(col.visibleIndex)"
        (pointerdown)="grid.navigation.focusOutRowHeader($event)">
    </igx-grid-cell>
</ng-template>

<ng-template #headerTemplate let-column>
    <div class='igx-grid__tr--header igx-grid__row-indentation--level-{{getLevel(column)}}'
        (click)="this.selectPivotRow(column, $event)">
        <igx-icon [attr.draggable]=" false" (click)="grid.toggleRow(getRowDimensionKey(column))">
            {{ getExpandState(column) ? 'expand_more' : 'chevron_right'}}</igx-icon>
        {{column.header}}
    </div>
</ng-template>

<ng-template #headerDefaultTemplate let-column>

    <div class='igx-grid__tr--header igx-grid__row-indentation--level-{{getLevel(column)}}'
        (click)="this.selectPivotRow(column, $event)">
        <igx-icon style='flex-shrink: 0;' [attr.draggable]=" false">
        </igx-icon>
        {{column.header}}
    </div>
</ng-template>