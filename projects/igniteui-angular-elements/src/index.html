<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>IgniteuiAngularElements</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body class="igx-typography">
  <igx-grid id="grid1" moving="true" paging="true" auto-generate="true" allow-filtering="true" filter-mode="excelStyleFilter" display-density="compact">
    <igx-grid-toolbar>
      <igx-grid-toolbar-title>Grid Toolbar</igx-grid-toolbar-title>
      <igx-grid-toolbar-actions>
        <igx-grid-toolbar-hiding></igx-grid-toolbar-hiding>
        <igx-grid-toolbar-pinning></igx-grid-toolbar-pinning>
        <igx-grid-toolbar-exporter></igx-grid-toolbar-exporter>
      </igx-grid-toolbar-actions>
    </igx-grid-toolbar>

    <!-- <igx-column field="ProductID" dataType="number"></igx-column>
    <igx-column field="ProductName"></igx-column>
    <igx-column field="CategoryName"></igx-column>
    <igx-column field="InStock" dataType="number"></igx-column>
    <igx-column field="ImageUrl">

    </igx-column>

    <igx-paginator></igx-paginator> -->
  </igx-grid>

  <igx-tree-grid id="treegrid1" moving="true" auto-generate="true" allow-filtering="true" filter-mode="excelStyleFilter" display-density="compact" child-data-key="products">
  </igx-tree-grid>

  <igx-hierarchical-grid id="hgrid1" moving="true" auto-generate="true" allow-filtering="true" filter-mode="excelStyleFilter" display-density="compact">
  </igx-hierarchical-grid>

  <igx-pivot-grid id="pivotgrid1" default-expand-state="true" row-selection="single"></igx-pivot-grid>

  <!-- <igc-paginator></igc-paginator> -->
  <script src="assets/data/nw-products.js"></script>
  <script src="assets/data/tree-grid-ds.js"></script>
  <script src="assets/data/projects-hgrid.js"></script>
  <script src="assets/data/pivot-data.js"></script>
  <script>
    let grid = document.getElementById('grid1');
    grid.data = northwindProducts;

    let treegrid = document.getElementById('treegrid1');
    treegrid.data = treeGridDS;

    let hgrid = document.getElementById('hgrid1');
    hgrid.data = hgridData;

    let pivotgrid = document.getElementById('pivotgrid1');
    const clear = (el) => el === 0 || Boolean(el);
    pivotgrid.pivotConfiguration = {
        columns: [
            {
                memberName: 'Country',
                enabled: true
            }
        ],
        rows: [
            {
                memberName: 'City',
                enabled: true
            }
        ],
        values: [
            {
                member: 'UnitsSold',
                aggregate: {
                    key: 'SUM',
                    aggregator: (data) => data.length && data.filter(clear).length ? data.filter(clear).reduce((a, b) => +a + +b) : 0,
                    label: 'Sum'
                },
                enabled: true,
                styles: {
                    upFont: (rowData, columnKey) => rowData[columnKey] > 300,
                    downFont: (rowData, columnKey) => rowData[columnKey] <= 300
                },
                // dataType: 'currency',
                formatter: (value) => value ? value + '$' : undefined
            },
            {
                member: 'AmountOfSale',
                displayName: 'Amount of Sale',
                aggregate: {
                    key: 'SUM',
                    aggregator: (members, data) => data.reduce((accumulator, value) => accumulator + value.UnitPrice * value.UnitsSold, 0),
                    label: 'Sum of Sale'
                },
                aggregateList: [{
                    key: 'SUM',
                    aggregator: (members, data) => data.reduce((accumulator, value) => accumulator + value.UnitPrice * value.UnitsSold, 0),
                    label: 'Sum of Sale'
                }, {
                    key: 'MIN',
                    aggregator: (members, data) => {
                        let min = 0;
                        if (data.length === 1) {
                            min = data[0].UnitPrice * data[0].UnitsSold;
                        } else if (data.length > 1) {
                            const mappedData = data.map(x => x.UnitPrice * x.UnitsSold);
                            min = mappedData.reduce((a, b) => Math.min(a, b));
                        }
                        return min;
                    },
                    label: 'Minimum of Sale'
                }, {
                    key: 'MAX',
                    aggregator: (members, data) => {
                        let max = 0;
                        if (data.length === 1) {
                            max = data[0].UnitPrice * data[0].UnitsSold;
                        } else if (data.length > 1) {
                            const mappedData = data.map(x => x.UnitPrice * x.UnitsSold);
                            max = mappedData.reduce((a, b) => Math.max(a,b));
                        }
                        return max;
                    },
                    label: 'Maximum of Sale'
                }],
                enabled: true,
                dataType: 'currency',
                styles: {
                    upFont1: (rowData, columnKey) => rowData[columnKey] > 50,
                    downFont1: (rowData, columnKey) => rowData[columnKey] <= 50
                },
            }
        ],
        filters: [
            {
                memberName: 'SellerName',
                enabled: true,
                //filter: this.filterExpTree
            }
        ]
    };
    pivotgrid.data = pivotData;
  </script>
</body>
</html>
